<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="listGraph.min.css">
  <link rel="stylesheet" type="text/css" href="styles.css">

  <title>D3 List Graph</title>
</head>
<body>
  <h1>D3 List Graph <em id="version"></em></h1>
  <h2>Small: 28 nodes</h2>
  <div id="example-small" class="list-graph">
    <div class="top-bar"></div>
    <div class="wrapper"><svg class="base"></svg></div>
  </div>
  <h2>Medium: 100 nodes</h2>
  <div id="example-medium" class="list-graph">
    <div class="top-bar"></div>
    <div class="wrapper"><svg class="base"></svg></div>
  </div>
  <h2>Large: 500 nodes</h2>
  <div id="example-large" class="list-graph">
    <div class="top-bar"></div>
    <div class="wrapper"><svg class="base"></svg></div>
  </div>
  <h2>Larger: 1,000 nodes</h2>
  <div id="example-extra-large" class="list-graph">
    <div class="top-bar"></div>
    <div class="wrapper"><svg class="base"></svg></div>
  </div>
  <script src="jquery.min.js"></script>
  <script src="jquery.mousewheel.min.js"></script>
  <script src="d3.min.js"></script>
  <script src="d3.listGraph.optimized.min.js"></script>
  <script src="listGraph.optimized.min.js"></script>
  <script>
    'use strict';

    document.querySelector('#version').innerHTML = 'v' + ListGraph.version;

    var customDispatcher = function (event, data) {
      console.log('Custom dispatcher: has ' + event, data);
    };

    function customButtonCb () {
      alert('You clicked on a custom button');
    }

    function createListGraph (querySelector, data, rootNodes) {
      return new ListGraph({
        columns: 5,
        data: data,
        element: document.querySelector(querySelector),
        iconPath: 'icons.svg',
        rootNodes: rootNodes || [-1],
        activeLevel: 1,
        noRootActiveLevelDiff: 1,
        forceWidth: true,
        rows: 8,
        sortBy: 'precision',
        dispatcher: customDispatcher,
        lessTransitions: 0,
        querying: true,
        hideOutwardsLinks: true,
        showLinkLocation: true,
        nodeInfoContextMenu: [{
          label: 'ID',
          property: (data) => data.id
        }, {
          label: 'Name',
          property: (data) => data.data.name
        }],
        customTopbarButtons: [{
          label: 'Click me',
          callback: customButtonCb,
          iconSpan: 'icons.svg#two-bars'
        }]
      });
    }

    d3.json('data.json', function (error, data) {
      if (error) throw error;

      var graph = createListGraph('#example-small', data, [1, 2]);
    });

    d3.json('data-100.json', function (error, data) {
      if (error) throw error;

      var graph = createListGraph('#example-medium', data);
    });

    d3.json('data-500.json', function (error, data) {
      if (error) throw error;

      var graph = createListGraph('#example-large', data);
    });

    d3.json('data-1000.json', function (error, data) {
      if (error) throw error;

      var graph = createListGraph('#example-extra-large', data);
    });

    $('#example-small').on('d3ListGraphNodeClick', function (e) {
      console.log('I clicked on ' + e.originalEvent.detail.id);
    });
  </script>
</body>
</html>
