{"version":3,"sources":["listGraph.min.js"],"names":["ListGraph","$","d3","isObject","value","type","arrayToFakeObjs","arrayIds","fakeObjs","i","length","push","id","collectInclClones","node","originalNode","clone","clones","concat","up","callback","child","nodesInclClones","j","parents","down","childRefs","upAndDown","callbackUp","callbackDown","isFunction","objToString","call","funcTag","roundRect","x","y","width","height","radius","topLeft","topRight","bottomLeft","bottomRight","e","isFinite","nativeIsFinite","exponentialGradient","el","start","end","name","power","steps","scale","pow","exponent","stepSize","gradient","append","attr","offset","color","opacity","isObjectLike","isNative","reIsNative","test","fnToString","reIsHostCtor","getNative","object","key","undefined","isLength","MAX_SAFE_INTEGER","babelHelpers","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","protoProps","staticProps","prototype","inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","SCROLLBAR_CLASS","Scrollbars","baseSelection","visData","_this","this","selection","each","data","index","select","parentNode","datum","scrollbar","classed","CLASSNAME","SCROLLBAR_WIDTH","COLUMNS","ROWS","ICON_PATH","DEFAULT_SORT_ORDER","DEFAULT_BAR_MODE","TRANSITION_SEMI_FAST","COLOR_NEGATIVE_RED","COLOR_POSITIVE_GREEN","objectProto","toString","BAR_CLASS","Bar","barData","nodeData","bars","setupMagnitude","_this2","currentSorting","nodes","depth","sortBy","generatePath","mode","setupBorder","global","row","padding","column","contentWidth","contentHeight","setupIndicator","_this3","level","cell","activeHeight","inactiveheight","selectAll","enter","bind","indicator","adjustWidth","bottom","generateTwoBarsPath","generateOneBarPath","Math","min","abs","BARS_CLASS","Bars","that","insertBefore","transition","duration","refBars","currentBar","referenceValue","console","error","LINKS_CLASS","LINK_CLASS","Links","layout","groups","links","class","d","diagonal","nodeIds","_highlight","className","update","get","svg","source","offsetY","offsetX","projection","NODES_CLASS","NODE_CLASS","CLONE_CLASS","Nodes","vis","events","drawFullSizeRect","shrinking","currentLinks","rows","nodeLocks","on","toggleLock","setUpLock","iconPath","mouseClick","highlightNodes","dehighlightNodes","barMode","style","text","event","log","eventHelper","optionalParams","subSelectionClass","filter","apply","d3El","lockedNode","active","inactive","unlockNode","lockNode","els","parseInt","cx","cy","r","broadcast","currentNodeData","currentActiveProperty","traverseCallbackUp","childData","hovering","traverseCallbackDown","updateIndicator","highlight","traverseCallback","newSortType","COLUMN_CLASS","SCROLL_CONTAINER_CLASS","Columns","scrollbarWidth","getBoundingClientRect","scrollHeight","scrollbarHeight","max","linkSelections","incoming","selectByColumn","outgoing","scrollTop","heightScale","linear","domain","range","invertedHeightScale","invert","TOPBAR_EL","TOPBAR_CLASS","TOPBAR_CONTROL_EL","TOPBAR_CONTROL_CLASS","TOPBAR_GLOBAL_CONTROL_CLASS","Topbar","empty","insert","controlSwitch","switchArrow","globalControls","globalPrecision","sortAllColumns","highlightBars","globalPrecisionWrapper","order","globalRecall","globalRecallWrapper","globalName","highlightLabels","globalNameWrapper","globalOneBar","switchBarMode","globalOneBarWrapper","globalTwoBars","globalTwoBarsWrapper","localControlWrapper","localControls","control","local","sortOrder","toggleColumn","left","sortColumn","html","toggleOptions","deHighlight","baseElD3","selectNodesColumn","resetSortEl","columnKeys","keys","len","objectTypes","function","freeExports","exports","nodeType","freeModule","module","freeGlobal","freeSelf","freeWindow","window","root","objectProto$2","Function","hasOwnProperty","RegExp","replace","arrayTag","objectProto$1","objToString$1","nativeIsArray","Array","isArray","ExtendableError","_Error","message","getPrototypeOf","Error","captureStackTrace","LayoutNotAvailable","_ExtendableError","EventDispatcherNoFunction","_ExtendableError2","Events","_stack","dispatch","_dispatchEvent","eventName","document","createEvent","initCustomEvent","dispatchEvent","times","Infinity","stack","splice","off","baseEl","rootNodes","options","listGraph","baseElJq","svgD3","svgJq","columns","dispatcher","addClass","process","afterOffsetOpacity","beforeOffsetOpacity","topbar","container","scrollPreparation","scrollbars","$levels","mousewheelColumn","scrollbarMouseDown","globalMouseUp","globalMouseMove","activeScrollbar","deltaY","clientY","scrollY","contentScrollTop","scroll","offsetLinks","preventDefault","selector","property","sort","switchMode","trigger","_barMode","set"],"mappings":"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","file":"listGraph.min.js","sourcesContent":["/* Copyright Fritz Lekschas: D3 example visualization app using list-based graphs */\nvar ListGraph = (function ($,d3) { 'use strict';\n\n  var babelHelpers = {};\n\n  babelHelpers.classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  babelHelpers.createClass = (function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  })();\n\n  babelHelpers.inherits = function (subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  };\n\n  babelHelpers.possibleConstructorReturn = function (self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  };\n\n  babelHelpers;\n  /**\n   * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n   * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n   *\n   * @static\n   * @memberOf _\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n   * @example\n   *\n   * _.isObject({});\n   * // => true\n   *\n   * _.isObject([1, 2, 3]);\n   * // => true\n   *\n   * _.isObject(1);\n   * // => false\n   */\n  function isObject(value) {\n    // Avoid a V8 JIT bug in Chrome 19-20.\n    // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n    var type = typeof value;\n    return !!value && (type == 'object' || type == 'function');\n  }\n\n  var SCROLLBAR_CLASS = 'scrollbar';\n\n  var Scrollbars = function Scrollbars(baseSelection, visData, width) {\n    var _this = this;\n\n    babelHelpers.classCallCheck(this, Scrollbars);\n\n    this.visData = visData;\n    this.width = width;\n\n    // Add empty scrollbar element\n    this.selection = baseSelection.append('rect').attr('class', SCROLLBAR_CLASS).call(function (selection) {\n      selection.each(function (data, index) {\n        d3.select(this.parentNode).datum().scrollbar.el = this;\n      });\n    }).attr('x', function (data) {\n      return data.scrollbar.x;\n    }).attr('y', function (data) {\n      return data.scrollbar.y;\n    }).attr('width', function (data) {\n      return _this.width;\n    }).attr('height', function (data) {\n      return data.scrollbar.height;\n    }).attr('rx', this.width / 2).attr('ry', this.width / 2).classed('ready', true);\n  };\n\n  var CLASSNAME = 'list-graph';\n\n  var SCROLLBAR_WIDTH = 6;\n  var COLUMNS = 5;\n  var ROWS = 5;\n\n  // An empty path is equal to inline SVG.\n  var ICON_PATH = '';\n\n  var DEFAULT_SORT_ORDER = 'desc';\n\n  var DEFAULT_BAR_MODE = 'one';\n\n  var TRANSITION_SEMI_FAST = 250;\n  // Gradient colors\n  var COLOR_NEGATIVE_RED = '#e0001c';\n  var COLOR_POSITIVE_GREEN = '#60bf00';\n\n  function arrayToFakeObjs(arrayIds) {\n    var fakeObjs = [];\n\n    for (var i = arrayIds.length; i--;) {\n      fakeObjs.push({ id: arrayIds[i] });\n    }\n\n    return fakeObjs;\n  }\n\n  /**\n   * Collect all cloned nodes, including the original node.\n   *\n   * @method  collectInclClones\n   * @author  Fritz Lekschas\n   * @date    2015-12-30\n   * @param   {Object}  node  Start node\n   * @return  {Array}         Array of original and cloned nodes.\n   */\n  function collectInclClones(node) {\n    var originalNode = node;\n\n    if (node.clone) {\n      originalNode = node.originalNode;\n    }\n\n    var clones = [originalNode];\n\n    if (originalNode.clones.length) {\n      clones = clones.concat(originalNode.clones);\n    }\n\n    return clones;\n  }\n\n  function up(node, callback, child) {\n    var nodesInclClones = collectInclClones(node);\n\n    for (var i = nodesInclClones.length; i--;) {\n      if (child) {\n        callback(nodesInclClones[i], child);\n      }\n\n      for (var j = nodesInclClones[i].parents.length; j--;) {\n        up(nodesInclClones[i].parents[j], callback, nodesInclClones[i]);\n      }\n    }\n  }\n\n  function down(node, callback) {\n    var nodesInclClones = collectInclClones(node);\n\n    for (var i = nodesInclClones.length; i--;) {\n      callback(nodesInclClones[i]);\n\n      for (var j = nodesInclClones[i].childRefs.length; j--;) {\n        down(nodesInclClones[i].childRefs[j], callback);\n      }\n    }\n  }\n\n  function upAndDown(node, callbackUp, callbackDown) {\n    if (callbackDown) {\n      up(node, callbackUp);\n      down(node, callbackDown);\n    } else {\n      up(node, callbackUp);\n      down(node, callbackUp);\n    }\n  }\n\n  /** `Object#toString` result references. */\n  var funcTag = '[object Function]';\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /**\n   * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n   * of values.\n   */\n  var objToString = objectProto.toString;\n\n  /**\n   * Checks if `value` is classified as a `Function` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n   * @example\n   *\n   * _.isFunction(_);\n   * // => true\n   *\n   * _.isFunction(/abc/);\n   * // => false\n   */\n  function isFunction(value) {\n    // The use of `Object#toString` avoids issues with the `typeof` operator\n    // in older versions of Chrome and Safari which return 'function' for regexes\n    // and Safari 8 which returns 'object' for typed array constructors.\n    return isObject(value) && objToString.call(value) == funcTag;\n  }\n\n  function roundRect(x, y, width, height, radius) {\n    var topLeft = 0;\n    var topRight = 0;\n    var bottomLeft = 0;\n    var bottomRight = 0;\n\n    try {\n      topLeft = radius.topLeft || 0;\n      topRight = radius.topRight || 0;\n      bottomLeft = radius.bottomLeft || 0;\n      bottomRight = radius.bottomRight || 0;\n    } catch (e) {}\n\n    return 'M' + (x + topLeft) + ',' + y + 'h' + (width - topLeft - topRight) + 'a' + topRight + ',' + topRight + ' 0 0 1 ' + topRight + ',' + topRight + 'v' + (height - (topRight + bottomRight)) + 'a' + bottomRight + ',' + bottomRight + ' 0 0 1 ' + -bottomRight + ',' + bottomRight + 'h' + (bottomLeft - (width - bottomRight)) + 'a' + bottomLeft + ',' + bottomLeft + ' 0 0 1 ' + -bottomLeft + ',' + -bottomLeft + 'v' + (topLeft - (height - bottomLeft)) + 'a' + topLeft + ',' + topLeft + ' 0 0 1 ' + topLeft + ',' + -topLeft + 'z';\n  }\n\n  var BAR_CLASS = 'bar';\n\n  var Bar = (function () {\n    function Bar(selection, barData, nodeData, visData, bars) {\n      var _this = this;\n\n      babelHelpers.classCallCheck(this, Bar);\n\n      var that = this;\n\n      this.data = barData;\n      this.nodeData = nodeData;\n      this.visData = visData;\n      this.bars = bars;\n\n      this.data.x = nodeData.x;\n      this.data.level = nodeData.depth;\n\n      this.height = this.visData.global.row.contentHeight / (this.data.length * 2) - this.visData.global.cell.padding * 2;\n\n      this.activeHeight = this.visData.global.row.contentHeight - 2;\n\n      this.inactiveheight = this.visData.global.cell.padding * 2 - 1;\n\n      this.selection = selection.selectAll(BAR_CLASS).data(this.data).enter().append('g').attr('class', function (data) {\n        return BAR_CLASS + ' ' + data.id;\n      }).classed('active', function (data) {\n        return data.id === _this.visData.nodes[_this.nodeData.depth].sortBy;\n      });\n\n      // Local helper method to avoid code duplication.\n      // Calling a class method from within the consructor is possible but `this`\n      // is not available. Thus, we need to create local function and pass in\n      // `this` as `that`, which feels very hacky but it works.\n      function setupMagnitude(selection) {\n        var _this2 = this;\n\n        var currentSorting = this.visData.nodes[this.nodeData.depth].sortBy;\n\n        selection.attr('d', function (data) {\n          return Bar.generatePath(data, _this2.bars.mode, currentSorting, _this2.visData);\n        }).classed('bar-magnitude', true);\n      }\n\n      function setupBorder(selection) {\n        selection.attr('x', 0).attr('y', this.visData.global.row.padding).attr('width', this.visData.global.column.contentWidth).attr('height', this.visData.global.row.contentHeight).attr('rx', 2).attr('ry', 2).classed('bar-border', true);\n      }\n\n      function setupIndicator(selection) {\n        var _this3 = this;\n\n        selection.attr('d', function (data) {\n          return Bar.generatePath(data, _this3.bars.mode, undefined, _this3.visData, data.value);\n        }).classed('bar-indicator', true);\n      }\n\n      this.selection.append('rect').call(setupBorder.bind(this));\n\n      this.selection.append('path').call(setupMagnitude.bind(this));\n\n      this.selection.append('path').call(setupIndicator.bind(this));\n    }\n\n    babelHelpers.createClass(Bar, null, [{\n      key: 'generatePath',\n      value: function generatePath(data, mode, currentSorting, visData, indicator, adjustWidth, bottom) {\n        if (mode === 'two') {\n          return Bar.generateTwoBarsPath(data, visData, bottom);\n        } else {\n          return Bar.generateOneBarPath(data, currentSorting, visData, indicator, adjustWidth);\n        }\n      }\n    }, {\n      key: 'generateOneBarPath',\n      value: function generateOneBarPath(data, currentSorting, visData, indicator, adjustWidth) {\n        var x = 0;\n\n        var width = 2;\n\n        var height = visData.global.row.contentHeight;\n\n        var radius = {\n          topLeft: 2,\n          bottomLeft: 2\n        };\n\n        if (indicator) {\n          radius = {};\n        }\n\n        if (data.id !== currentSorting && typeof indicator === 'undefined') {\n          x = data.value * visData.global.column.contentWidth - 3;\n          radius = {};\n        } else if (indicator) {\n          x = indicator * visData.global.column.contentWidth;\n          if (adjustWidth) {\n            if (data.value < indicator) {\n              x = data.value * visData.global.column.contentWidth;\n            }\n            width = Math.min(Math.abs(indicator - data.value), 2) * visData.global.column.contentWidth;\n          }\n        } else {\n          width = visData.global.column.contentWidth * data.value;\n        }\n\n        return roundRect(x, visData.global.row.padding, width, height, radius);\n      }\n    }, {\n      key: 'generateTwoBarsPath',\n      value: function generateTwoBarsPath(data, visData, bottom) {\n        var height = visData.global.row.contentHeight / 2;\n\n        var width = visData.global.column.contentWidth * data.value;\n\n        var y = visData.global.row.padding;\n\n        var radius = { topLeft: 2 };\n\n        if (bottom) {\n          radius = { bottomLeft: 2 };\n          y += height;\n        }\n\n        return roundRect(0, y, width, height, radius);\n      }\n    }]);\n    return Bar;\n  })();\n\n  var BARS_CLASS = 'bars';\n\n  var Bars = (function () {\n    function Bars(selection, mode, visData) {\n      babelHelpers.classCallCheck(this, Bars);\n\n      var that = this;\n\n      this.mode = mode;\n      this.visData = visData;\n\n      this.selection = selection.append('g').attr('class', BARS_CLASS);\n\n      this.selection.each(function (datum) {\n        new Bar(d3.select(this), datum.data.bars, datum, that.visData, that);\n      });\n    }\n\n    babelHelpers.createClass(Bars, [{\n      key: 'update',\n      value: function update(selection, sortBy) {\n        var _this = this;\n\n        selection.each(function () {\n          var el = d3.select(this);\n\n          if (el.classed('active')) {\n            el.classed('active', false);\n          } else {\n            el.classed('active', true);\n            // Ensure that the active bars we are places before any other bar,\n            // thus placing them in the background\n            this.parentNode.insertBefore(this, d3.select(this.parentNode).select('.bar').node());\n          }\n        });\n\n        selection.selectAll('.bar-magnitude').transition().duration(TRANSITION_SEMI_FAST).attr('d', function (data) {\n          return Bar.generatePath(data, _this.mode, sortBy, _this.visData);\n        });\n      }\n    }, {\n      key: 'updateIndicator',\n      value: function updateIndicator(refBars, currentBar, referenceValue) {\n        var _this2 = this;\n\n        currentBar.transition().duration(0).attr('d', function (data) {\n          return Bar.generatePath(data, _this2.mode, undefined, _this2.visData);\n        });\n\n        refBars.attr('d', function (data) {\n          return Bar.generatePath(data, _this2.mode, undefined, _this2.visData, referenceValue);\n        }).classed('positive', function (data) {\n          return data.value >= referenceValue;\n        });\n\n        refBars.transition().duration(TRANSITION_SEMI_FAST).attr('d', function (data) {\n          return Bar.generatePath(data, _this2.mode, undefined, _this2.visData, referenceValue, true);\n        });\n      }\n    }, {\n      key: 'switchMode',\n      value: function switchMode(mode, currentSorting) {\n        var _this3 = this;\n\n        if (this.mode !== mode) {\n          if (mode === 'one') {\n            if (currentSorting.global.type) {\n              this.selection.selectAll('.bar').selectAll('.bar-magnitude').transition().duration(TRANSITION_SEMI_FAST).attr('d', function (data) {\n                return Bar.generateOneBarPath(data, currentSorting.global.type, _this3.visData);\n              });\n            } else {\n              console.error('Switching magnitude visualization after individual sorting is ' + 'not supported yet.');\n            }\n          }\n\n          if (mode === 'two') {\n            this.selection.selectAll('.bar.precision').selectAll('.bar-magnitude').transition().duration(TRANSITION_SEMI_FAST).attr('d', function (data) {\n              return Bar.generateTwoBarsPath(data, _this3.visData);\n            });\n\n            this.selection.selectAll('.bar.recall').selectAll('.bar-magnitude').transition().duration(TRANSITION_SEMI_FAST).attr('d', function (data) {\n              return Bar.generateTwoBarsPath(data, _this3.visData, true);\n            });\n          }\n\n          this.mode = mode;\n        }\n      }\n    }]);\n    return Bars;\n  })();\n\n  var LINKS_CLASS = 'links';\n  var LINK_CLASS = 'link';\n\n  var Links = (function () {\n    function Links(selection, visData, layout) {\n      var _this = this;\n\n      babelHelpers.classCallCheck(this, Links);\n\n      this.visData = visData;\n      this.layout = layout;\n\n      this.groups = selection.append('g').attr('class', LINKS_CLASS).call(function (selection) {\n        selection.each(function (data, index) {\n          d3.select(this.parentNode).datum().links = this;\n        });\n      });\n\n      this.links = this.groups.selectAll(LINK_CLASS + '-bg').data(function (data, index) {\n        return _this.layout.links(index);\n      }).enter().append('g').attr('class', LINK_CLASS);\n\n      this.links.append('path').attr({\n        'class': LINK_CLASS + '-bg',\n        'd': this.diagonal\n      });\n\n      this.links.append('path').attr({\n        'class': LINK_CLASS + '-direct',\n        'd': this.diagonal\n      });\n    }\n\n    babelHelpers.createClass(Links, [{\n      key: 'highlight',\n      value: function highlight(nodeIds, _highlight, className) {\n        className = className ? className : 'hovering';\n\n        this.links.data(nodeIds, function (data) {\n          return data.id;\n        }).classed(className, _highlight === false ? false : true);\n      }\n    }, {\n      key: 'scroll',\n      value: function scroll(selection, data) {\n        // Update data of `g`.\n        selection.data(data);\n\n        // Next update all paths according to the new data.\n        selection.selectAll('path').attr('d', this.diagonal);\n      }\n    }, {\n      key: 'sort',\n      value: function sort(update) {\n        var start = function start() {\n          d3.select(this).classed('sorting', true);\n        };\n        var end = function end() {\n          d3.select(this).classed('sorting', false);\n        };\n\n        // Update data of `g`.\n        this.links.data(update, function (data) {\n          return data.id;\n        });\n\n        // Next update all paths according to the new data.\n        this.links.selectAll('path').transition().duration(TRANSITION_SEMI_FAST).attr('d', this.diagonal).each('start', start).each('end', end);\n      }\n    }, {\n      key: 'diagonal',\n      get: function get() {\n        var _this2 = this;\n\n        return d3.svg.diagonal().source(function (data) {\n          return {\n            x: data.source.node.y + data.source.offsetY + _this2.visData.global.row.height / 2,\n            y: data.source.node.x + data.source.offsetX + _this2.visData.global.column.contentWidth + _this2.visData.global.column.padding\n          };\n        }).target(function (data) {\n          return {\n            x: data.target.node.y + data.target.offsetY + _this2.visData.global.row.height / 2,\n            y: data.target.node.x + data.target.offsetX + _this2.visData.global.column.padding\n          };\n        }).projection(function (data) {\n          return [data.y, data.x];\n        });\n      }\n    }]);\n    return Links;\n  })();\n\n  var NODES_CLASS = 'nodes';\n  var NODE_CLASS = 'node';\n  var CLONE_CLASS = 'clone';\n\n  var Nodes = (function () {\n    function Nodes(vis, baseSelection, visData, links, events) {\n      var _this = this;\n\n      babelHelpers.classCallCheck(this, Nodes);\n\n      var that = this;\n\n      // Helper\n      function drawFullSizeRect(selection, className, shrinking) {\n        if (!shrinking) {\n          shrinking = 0;\n        }\n\n        selection.attr('x', function (data) {\n          return shrinking;\n        }).attr('y', function (data) {\n          return that.visData.global.row.padding + shrinking;\n        }).attr('width', that.visData.global.column.contentWidth - 2 * shrinking).attr('height', that.visData.global.row.contentHeight - 2 * shrinking).attr('rx', 2 - shrinking).attr('ry', 2 - shrinking).classed(className, true);\n      }\n\n      this.vis = vis;\n      this.visData = visData;\n      this.links = links;\n      this.events = events;\n      this.currentLinks = {};\n\n      this.groups = baseSelection.append('g').attr('class', NODES_CLASS).call(function (selection) {\n        selection.each(function (data, index) {\n          d3.select(this.parentNode).datum().nodes = this;\n        });\n      });\n\n      this.nodes = this.groups.selectAll('.' + NODE_CLASS).data(function (data) {\n        return data.rows;\n      }).enter().append('g').classed(NODE_CLASS, true).classed(CLONE_CLASS, function (data) {\n        return data.clone;\n      }).attr('transform', function (data) {\n        return 'translate(' + (data.x + _this.visData.global.column.padding) + ', ' + data.y + ')';\n      });\n\n      this.nodes.append('rect').call(drawFullSizeRect, 'bg-border');\n\n      this.nodes.append('rect').call(drawFullSizeRect, 'bg', 1);\n\n      var nodeLocks = this.nodes.append('g').attr('class', 'lock inactive').on('click', function () {\n        that.toggleLock.call(that, this);\n      });\n\n      nodeLocks.append('circle').call(this.setUpLock.bind(this), 'bg', 'bg');\n\n      nodeLocks.append('svg').call(this.setUpLock.bind(this), 'icon', 'icon-unlocked ease-all invisible-default').append('use').attr('xlink:href', this.vis.iconPath + '#unlocked');\n\n      nodeLocks.append('svg').call(this.setUpLock.bind(this), 'icon', 'icon-locked ease-all invisible-default').append('use').attr('xlink:href', this.vis.iconPath + '#locked');\n\n      this.nodes.on('click', function (data) {\n        that.mouseClick(this, data);\n      });\n\n      this.nodes.on('mouseenter', function (data) {\n        that.highlightNodes(this, data);\n      });\n\n      this.nodes.on('mouseleave', function (data) {\n        that.dehighlightNodes(this, data);\n      });\n\n      this.bars = new Bars(this.nodes, this.vis.barMode, this.visData);\n\n      this.nodes.append('rect').call(drawFullSizeRect, 'border');\n\n      // Add node label\n      this.nodes.call(function (selection) {\n        selection.append('foreignObject').attr('x', function (data) {\n          return _this.visData.global.cell.padding;\n        }).attr('y', function (data) {\n          return _this.visData.global.row.padding + _this.visData.global.cell.padding;\n        }).attr('width', _this.visData.global.column.contentWidth).attr('height', _this.visData.global.row.contentHeight - _this.visData.global.cell.padding * 2).attr('class', 'label-wrapper').append('xhtml:div').attr('class', 'label').attr('title', function (data) {\n          return data.data.name;\n        }).style('line-height', _this.visData.global.row.contentHeight - _this.visData.global.cell.padding * 2 + 'px').append('xhtml:span').text(function (data) {\n          return data.data.name;\n        });\n      });\n\n      if (isFunction(this.events.on)) {\n        this.events.on('d3ListGraphNodeClick', function (event) {\n          console.log('d3ListGraphNodeClick', event);\n        });\n\n        this.events.on('d3ListGraphNodeEnter', function (event) {\n          return _this.eventHelper(event, _this.highlightNodes);\n        });\n\n        this.events.on('d3ListGraphNodeLeave', function (event) {\n          return _this.eventHelper(event, _this.dehighlightNodes);\n        });\n\n        this.events.on('d3ListGraphNodeLock', function (event) {\n          return _this.eventHelper(event, _this.toggleLock, [], '.lock');\n        });\n\n        this.events.on('d3ListGraphNodeUnlock', function (event) {\n          return _this.eventHelper(event, _this.toggleLock, [], '.lock');\n        });\n      }\n    }\n\n    babelHelpers.createClass(Nodes, [{\n      key: 'eventHelper',\n      value: function eventHelper(event, callback, optionalParams, subSelectionClass) {\n        var that = this;\n\n        optionalParams = optionalParams ? optionalParams : [];\n\n        if (event.id) {\n          this.nodes.filter(function (data) {\n            return data.id === event.id;\n          }).each(function (data) {\n            var el = this;\n\n            if (subSelectionClass) {\n              el = d3.select(this).select(subSelectionClass).node();\n            }\n\n            callback.apply(that, [el, data].concat(optionalParams));\n          });\n        }\n      }\n    }, {\n      key: 'toggleLock',\n      value: function toggleLock(el) {\n        var d3El = d3.select(el);\n        var data = d3El.datum();\n\n        if (this.lockedNode) {\n          if (this.lockedNode.datum().id === data.id) {\n            this.lockedNode.classed({\n              'active': false,\n              'inactive': true\n            });\n            this.unlockNode(this.lockedNode.datum().id);\n            this.lockedNode = undefined;\n          } else {\n            // Reset previously locked node;\n            this.lockedNode.classed({\n              'active': false,\n              'inactive': true\n            });\n            this.unlockNode(this.lockedNode.datum().id);\n\n            d3El.classed({\n              'active': true,\n              'inactive': false\n            });\n            this.lockNode(data.id);\n            this.lockedNode = d3El;\n          }\n        } else {\n          d3El.classed({\n            'active': true,\n            'inactive': false\n          });\n          this.lockNode(data.id);\n          this.lockedNode = d3El;\n        }\n      }\n    }, {\n      key: 'lockNode',\n      value: function lockNode(id) {\n        var that = this;\n        var els = this.nodes.filter(function (data) {\n          return data.id === id;\n        });\n\n        els.each(function (data) {\n          var el = d3.select(this);\n\n          that.highlightNodes(this, data, 'lock');\n        });\n\n        els.selectAll('.bg-border').transition().duration(TRANSITION_SEMI_FAST).attr('width', function () {\n          return parseInt(d3.select(this).attr('width')) + that.visData.global.row.height / 2;\n        });\n      }\n    }, {\n      key: 'unlockNode',\n      value: function unlockNode(id) {\n        var that = this;\n        var els = this.nodes.filter(function (data) {\n          return data.id === id;\n        });\n\n        els.each(function (data) {\n          that.dehighlightNodes(this, data, 'lock');\n        });\n\n        els.selectAll('.bg-border').transition().duration(TRANSITION_SEMI_FAST).attr('width', this.visData.global.column.contentWidth);\n      }\n    }, {\n      key: 'setUpLock',\n      value: function setUpLock(selection, mode, className) {\n        var height = this.visData.global.row.contentHeight / 2 - this.visData.global.cell.padding * 2;\n        var x = this.visData.global.column.contentWidth + 2;\n        var y = this.visData.global.row.padding + (this.visData.global.row.contentHeight - 2 * this.visData.global.cell.padding) / 4;\n\n        if (mode === 'bg') {\n          selection.attr({\n            class: className,\n            cx: x + height / 2,\n            cy: y + height / 2,\n            r: height * 3 / 4\n          });\n        } else {\n          selection.attr({\n            class: className,\n            x: x,\n            y: y,\n            width: height,\n            height: height\n          });\n        }\n      }\n    }, {\n      key: 'mouseClick',\n      value: function mouseClick(el, data) {\n        this.events.broadcast('d3ListGraphNodeClick', { id: data.id });\n      }\n    }, {\n      key: 'highlightNodes',\n      value: function highlightNodes(el, data, className) {\n        var _this2 = this;\n\n        var that = this;\n        var currentNodeData = data;\n\n        className = className ? className : 'hovering';\n\n        // Store link IDs\n        this.currentLinks[className] = [];\n\n        var currentActiveProperty = d3.select(el).selectAll('.bar.active .bar-magnitude').datum();\n\n        var traverseCallbackUp = function traverseCallbackUp(data, childData) {\n          data.hovering = 2;\n          for (var i = data.links.length; i--;) {\n            // Only push direct parent child connections. E.g.\n            // Store: (parent)->(child)\n            // Ignore: (parent)->(siblings of child)\n            if (data.links[i].target.node.id === childData.id) {\n              _this2.currentLinks[className].push(data.links[i].id);\n            }\n          }\n        };\n\n        var traverseCallbackDown = function traverseCallbackDown(data) {\n          data.hovering = 2;\n          for (var i = data.links.length; i--;) {\n            _this2.currentLinks[className].push(data.links[i].id);\n          }\n        };\n        upAndDown(data, traverseCallbackUp, traverseCallbackDown);\n\n        if (data.clone) {\n          data.originalNode.hovering = 1;\n        }\n\n        data.hovering = 1;\n\n        this.nodes.each(function (data) {\n          var node = d3.select(this);\n\n          if (data.hovering === 1) {\n            node.classed(className + '-directly', true);\n          } else if (data.hovering === 2) {\n            node.classed(className + '-indirectly', true);\n            node.selectAll('.bar.' + currentActiveProperty.id).classed('copy', function (data) {\n              var id = data.id;\n\n              if (data.clone) {\n                id = data.originalNode.id;\n              }\n\n              if (id !== currentNodeData.id) {\n                return true;\n              }\n            });\n\n            var currentBar = d3.select(el).selectAll('.bar.' + currentActiveProperty.id).classed('reference', true);\n\n            that.bars.updateIndicator(node.selectAll('.bar.copy .bar-indicator'), currentBar.selectAll('.bar-indicator'), currentActiveProperty.value);\n          }\n        });\n\n        this.links.highlight(arrayToFakeObjs(this.currentLinks[className]), true, className);\n\n        this.events.broadcast('d3ListGraphNodeEnter', { id: data.id });\n      }\n    }, {\n      key: 'dehighlightNodes',\n      value: function dehighlightNodes(el, data, className) {\n        var traverseCallback = function traverseCallback(data) {\n          return data.hovering = 0;\n        };\n\n        className = className ? className : 'hovering';\n\n        data.hovering = 0;\n        upAndDown(data, traverseCallback);\n\n        if (data.clone) {\n          data.originalNode.hovering = 0;\n        }\n\n        this.nodes.classed(className + '-directly', false);\n        this.nodes.classed(className + '-indirectly', false);\n\n        this.links.highlight(arrayToFakeObjs(this.currentLinks[className]), false, className);\n\n        this.events.broadcast('d3ListGraphNodeLeave', { id: data.id });\n      }\n    }, {\n      key: 'sort',\n      value: function sort(update, newSortType) {\n        var _this3 = this;\n\n        for (var i = update.length; i--;) {\n          var start = function start() {\n            d3.select(this).classed('sorting', true);\n          };\n          var end = function end() {\n            d3.select(this).classed('sorting', false);\n          };\n\n          var selection = this.nodes.data(update[i].rows, function (data) {\n            return data.id;\n          });\n\n          selection.transition().duration(TRANSITION_SEMI_FAST).attr('transform', function (data) {\n            return 'translate(' + (data.x + _this3.visData.global.column.padding) + ', ' + data.y + ')';\n          }).each('start', start).each('end', end);\n\n          if (newSortType) {\n            this.bars.update(selection.selectAll('.bar'), update[i].sortBy);\n          }\n        }\n      }\n    }, {\n      key: 'barMode',\n      get: function get() {\n        return this.bars.mode;\n      }\n    }]);\n    return Nodes;\n  })();\n\n  var COLUMN_CLASS = 'column';\n  var SCROLL_CONTAINER_CLASS = 'scroll-container';\n\n  var Columns = (function () {\n    function Columns(selection, visData) {\n      var _this = this;\n\n      babelHelpers.classCallCheck(this, Columns);\n\n      this.visData = visData;\n      this.groups = selection.selectAll('g').data(this.visData.nodes).enter().append('g').attr('class', COLUMN_CLASS);\n\n      // We need to add an empty rectangle that fills up the whole column to ensure\n      // that the `g`'s size is at a maximum, otherwise scrolling will be halted\n      // when the cursor leaves an actually drawn element.\n      this.groups.append('rect').attr('class', SCROLL_CONTAINER_CLASS).attr('x', function (data) {\n        return data.x;\n      }).attr('y', function (data) {\n        return data.y;\n      }).attr('width', function (data) {\n        return _this.visData.global.column.width;\n      }).attr('height', function (data) {\n        return _this.visData.global.column.height;\n      });\n    }\n\n    babelHelpers.createClass(Columns, [{\n      key: 'scrollPreparation',\n      value: function scrollPreparation(vis, scrollbarWidth) {\n        var _this2 = this;\n\n        this.groups.each(function (data, index) {\n          var contentHeight = data.nodes.getBoundingClientRect().height + 2 * _this2.visData.global.row.padding;\n          var scrollHeight = contentHeight - _this2.visData.global.column.height;\n          var scrollbarHeight = scrollHeight > 0 ? Math.max(_this2.visData.global.column.height * _this2.visData.global.column.height / contentHeight, 10) : 0;\n\n          data.height = contentHeight;\n          data.linkSelections = {\n            incoming: index > 0 ? vis.selectByColumn(index - 1, '.link') : null,\n            outgoing: vis.selectByColumn(index, '.link')\n          };\n          data.scrollHeight = scrollHeight;\n          data.scrollTop = 0;\n          data.scrollbar = {\n            el: undefined,\n            x: data.x + _this2.visData.global.column.width - scrollbarWidth,\n            y: 0,\n            width: scrollbarWidth,\n            height: scrollbarHeight,\n            scrollHeight: _this2.visData.global.column.height - scrollbarHeight,\n            scrollTop: 0,\n            heightScale: d3.scale.linear().domain([0, scrollHeight]).range([0, _this2.visData.global.column.height - scrollbarHeight])\n          };\n          data.invertedHeightScale = data.scrollbar.heightScale.invert;\n        });\n      }\n    }, {\n      key: 'height',\n      get: function get() {\n        return this.visData.global.column.height;\n      }\n    }]);\n    return Columns;\n  })();\n\n  var TOPBAR_EL = 'div';\n  var TOPBAR_CLASS = 'top-bar';\n\n  var TOPBAR_CONTROL_EL = 'ul';\n  var TOPBAR_CONTROL_CLASS = 'controls';\n  var TOPBAR_GLOBAL_CONTROL_CLASS = 'global-controls';\n\n  var Topbar = (function () {\n    function Topbar(vis, selection, visData) {\n      var _this = this;\n\n      babelHelpers.classCallCheck(this, Topbar);\n\n      var that = this;\n\n      this.vis = vis;\n      this.visData = visData;\n      // Add base topbar element\n      this.el = selection.select('.' + TOPBAR_CLASS);\n\n      if (this.el.empty()) {\n        this.el = selection.insert(TOPBAR_EL, ':first-child').attr('class', TOPBAR_CLASS);\n      }\n\n      this.controlSwitch = this.el.append('div').attr('title', 'Toggle global / local topbar').style('width', this.visData.global.column.padding + 'px').classed('control-switch', true).on('click', this.switch.bind(this));\n\n      this.switchArrow = this.controlSwitch.append('svg').append('use').attr('xlink:href', this.vis.iconPath + '#arrow-down').attr('class', 'switch-arrow');\n\n      this.globalControls = this.el.append(TOPBAR_CONTROL_EL).classed(TOPBAR_GLOBAL_CONTROL_CLASS, true);\n\n      // Add button for sorting by precision\n      this.globalPrecision = this.globalControls.append('li').attr('class', 'control-btn sort-precision').classed('active', function () {\n        if (that.vis.currentSorting.global.type === 'precision') {\n          // Save currently active element. Needed when when re-sorting for the\n          // first time, to be able to de-highlight this element.\n          that.vis.currentSorting.global.el = d3.select(this);\n          return true;\n        }\n      }).on('click', function (data) {\n        that.sortAllColumns(this, 'precision');\n      }).on('mouseenter', function () {\n        return _this.highlightBars(undefined, 'precision');\n      }).on('mouseleave', function () {\n        return _this.highlightBars(undefined, 'precision', true);\n      });\n\n      this.globalPrecisionWrapper = this.globalPrecision.append('div').attr('class', 'wrapper').text('Precision').style('margin', '0 ' + this.visData.global.column.padding + 'px');\n\n      this.globalPrecisionWrapper.append('svg').attr('class', 'icon-unsort invisible-default').classed('visible', this.vis.currentSorting.global.type !== 'precision').append('use').attr('xlink:href', this.vis.iconPath + '#unsort');\n\n      this.globalPrecisionWrapper.append('svg').attr('class', 'icon-sort-asc invisible-default').classed('visible', this.vis.currentSorting.global.type === 'precision' && this.vis.currentSorting.global.order === 1).append('use').attr('xlink:href', this.vis.iconPath + '#sort-asc');\n\n      this.globalPrecisionWrapper.append('svg').attr('class', 'icon-sort-desc invisible-default').classed('visible', this.vis.currentSorting.global.type === 'precision' && this.vis.currentSorting.global.order !== 1).append('use').attr('xlink:href', this.vis.iconPath + '#sort-desc');\n\n      // Add button for sorting by recall\n      this.globalRecall = this.globalControls.append('li').attr('class', 'control-btn sort-recall').classed('active', function () {\n        if (that.vis.currentSorting.global.type === 'recall') {\n          // See precision\n          that.vis.currentSorting.global.el = d3.select(this);\n          return true;\n        }\n      }).on('click', function (data) {\n        that.sortAllColumns(this, 'recall');\n      }).on('mouseenter', function () {\n        return _this.highlightBars(undefined, 'recall');\n      }).on('mouseleave', function () {\n        return _this.highlightBars(undefined, 'recall', true);\n      });\n\n      this.globalRecallWrapper = this.globalRecall.append('div').attr('class', 'wrapper').text('Recall').style('margin', '0 ' + this.visData.global.column.padding + 'px');\n\n      this.globalRecallWrapper.append('svg').attr('class', 'icon-unsort invisible-default').classed('visible', this.vis.currentSorting.global.type !== 'recall').append('use').attr('xlink:href', this.vis.iconPath + '#unsort');\n\n      this.globalRecallWrapper.append('svg').attr('class', 'icon-sort-asc invisible-default').classed('visible', this.vis.currentSorting.global.type === 'recall' && this.vis.currentSorting.global.order === 1).append('use').attr('xlink:href', this.vis.iconPath + '#sort-asc');\n\n      this.globalRecallWrapper.append('svg').attr('class', 'icon-sort-desc invisible-default').classed('visible', this.vis.currentSorting.global.type === 'recall' && this.vis.currentSorting.global.order !== 1).append('use').attr('xlink:href', this.vis.iconPath + '#sort-desc');\n\n      // Add button for sorting by name\n      this.globalName = this.globalControls.append('li').attr('class', 'control-btn sort-name').classed('active', function () {\n        if (that.vis.currentSorting.global.type === 'name') {\n          // See precision\n          that.vis.currentSorting.global.el = d3.select(this);\n          return true;\n        }\n      }).on('click', function (data) {\n        that.sortAllColumns(this, 'name');\n      }).on('mouseenter', function () {\n        return _this.highlightLabels();\n      }).on('mouseleave', function () {\n        return _this.highlightLabels(true);\n      });\n\n      this.globalNameWrapper = this.globalName.append('div').attr('class', 'wrapper').text('Name').style('margin', '0 ' + this.visData.global.column.padding + 'px');\n\n      this.globalNameWrapper.append('svg').attr('class', 'icon-unsort invisible-default').classed('visible', this.vis.currentSorting.global.type !== 'name').append('use').attr('xlink:href', this.vis.iconPath + '#unsort');\n\n      this.globalNameWrapper.append('svg').attr('class', 'icon-sort-asc invisible-default').classed('visible', this.vis.currentSorting.global.type === 'name' && this.vis.currentSorting.global.order === 1).append('use').attr('xlink:href', this.vis.iconPath + '#sort-alpha-asc');\n\n      this.globalNameWrapper.append('svg').attr('class', 'icon-sort-desc invisible-default').classed('visible', this.vis.currentSorting.global.type === 'name' && this.vis.currentSorting.global.order !== 1).append('use').attr('xlink:href', this.vis.iconPath + '#sort-alpha-desc');\n\n      // Add button for switching to 'one bar'\n      this.globalOneBar = this.globalControls.append('li').attr('class', 'control-btn one-bar').classed('active', this.vis.barMode === 'one').on('click', function () {\n        that.switchBarMode(this, 'one');\n      });\n\n      this.globalOneBarWrapper = this.globalOneBar.append('div').attr('class', 'wrapper').text('One bar').style('margin', '0 ' + this.visData.global.column.padding + 'px');\n\n      this.globalOneBarWrapper.append('svg').attr('class', 'icon-one-bar').append('use').attr('xlink:href', this.vis.iconPath + '#one-bar');\n\n      // Add button for switching to 'two bars'\n      this.globalTwoBars = this.globalControls.append('li').attr('class', 'control-btn two-bars').classed('active', this.vis.barMode === 'two').on('click', function () {\n        that.switchBarMode(this, 'two');\n      });\n\n      this.globalTwoBarsWrapper = this.globalTwoBars.append('div').attr('class', 'wrapper').text('Two bars').style('margin', '0 ' + this.visData.global.column.padding + 'px');\n\n      this.globalTwoBarsWrapper.append('svg').attr('class', 'icon-two-bars').append('use').attr('xlink:href', this.vis.iconPath + '#two-bars');\n\n      this.localControlWrapper = this.el.append('div').classed('local-controls', true);\n\n      this.localControls = this.localControlWrapper.selectAll(TOPBAR_CONTROL_CLASS).data(visData.nodes).enter().append(TOPBAR_CONTROL_EL).classed(TOPBAR_CONTROL_CLASS, true).style('width', this.visData.global.column.width + 'px');\n\n      this.localControls.each(function (data, index) {\n        var control = d3.select(this);\n\n        /*\n         * Order:\n         * 0 = unsorted\n         * 1 = asc\n         * -1 = desc\n         */\n        that.vis.currentSorting.local[index] = {\n          type: data.sortBy,\n          order: data.sortOrder,\n          el: undefined\n        };\n\n        control.append('li').attr('class', 'control-btn toggle').style('width', that.visData.global.column.padding + 'px').on('click', that.toggleColumn);\n\n        control.append('li').attr('class', 'control-btn sort-precision ease-all').style({\n          'width': that.visData.global.column.contentWidth / 2 + 'px',\n          'left': that.visData.global.column.padding + 'px'\n        }).on('click', function (data) {\n          that.sortColumn(this, data.level, 'precision');\n        }).on('mouseenter', function () {\n          that.highlightBars(this.parentNode, 'precision');\n          d3.select(this).style('width', that.visData.global.column.contentWidth - 16 + 'px');\n        }).on('mouseleave', function () {\n          that.highlightBars(this.parentNode, 'precision', true);\n          d3.select(this).style('width', that.visData.global.column.contentWidth / 2 + 'px');\n        }).html('<div class=\"expandable-label\">' + '  <span class=\"letter abbr\">P</span>' + '  <span class=\"letter abbr\">r</span>' + '  <span class=\"letter\">e</span>' + '  <span class=\"letter abbr\">c</span>' + '  <span class=\"letter\">i</span>' + '  <span class=\"letter\">s</span>' + '  <span class=\"letter\">i</span>' + '  <span class=\"letter\">o</span>' + '  <span class=\"letter\">n</span>' + '</div>' + '<svg class=\"icon-unsort invisible-default ' + (that.vis.currentSorting.local[index].type !== 'precision' ? 'visible' : '') + '\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#unsort\"></use>' + '</svg>' + '<svg class=\"icon-sort-asc invisible-default ' + (that.vis.currentSorting.local[index].type === 'precision' && that.vis.currentSorting.local[index].order === 1 ? 'visible' : '') + '\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#sort-asc\"></use>' + '</svg>' + '<svg class=\"icon-sort-desc invisible-default ' + (that.vis.currentSorting.local[index].type === 'precision' && that.vis.currentSorting.local[index].order !== 1 ? 'visible' : '') + '\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#sort-desc\"></use>' + '</svg>');\n\n        control.append('li').attr('class', 'control-btn sort-recall ease-all').style({\n          'width': that.visData.global.column.contentWidth / 2 + 'px',\n          'left': that.visData.global.column.contentWidth / 2 + that.visData.global.column.padding + 'px'\n        }).on('click', function (data) {\n          that.sortColumn(this, data.level, 'recall');\n        }).on('mouseenter', function () {\n          that.highlightBars(this.parentNode, 'recall');\n          d3.select(this).style({\n            'width': that.visData.global.column.contentWidth - 16 + 'px',\n            'left': that.visData.global.column.padding + 16 + 'px'\n          });\n        }).on('mouseleave', function () {\n          that.highlightBars(this.parentNode, 'recall', true);\n          d3.select(this).style({\n            'width': that.visData.global.column.contentWidth / 2 + 'px',\n            'left': that.visData.global.column.contentWidth / 2 + that.visData.global.column.padding + 'px'\n          });\n        }).html('<div class=\"expandable-label\">' + '  <span class=\"letter abbr\">R</span>' + '  <span class=\"letter\">e</span>' + '  <span class=\"letter abbr\">c</span>' + '  <span class=\"letter\">a</span>' + '  <span class=\"letter abbr\">l</span>' + '  <span class=\"letter\">l</span>' + '</div>' + '<svg class=\"icon-unsort invisible-default ' + (that.vis.currentSorting.local[index].type !== 'recall' ? 'visible' : '') + '\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#unsort\"></use>' + '</svg>' + '<svg class=\"icon-sort-asc invisible-default ' + (that.vis.currentSorting.local[index].type === 'recall' && that.vis.currentSorting.local[index].order === 1 ? 'visible' : '') + '\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#sort-asc\"></use>' + '</svg>' + '<svg class=\"icon-sort-desc invisible-default ' + (that.vis.currentSorting.local[index].type === 'recall' && that.vis.currentSorting.local[index].order !== 1 ? 'visible' : '') + '\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#sort-desc\"></use>' + '</svg>');\n\n        control.append('li').attr('class', 'control-btn options').style('width', that.visData.global.column.padding + 'px').on('click', that.toggleOptions).html('<svg class=\"icon-gear\">' + '  <use xlink:href=\"' + that.vis.iconPath + '#gear\"></use>' + '</svg>');\n\n        if (that.vis.currentSorting.local[index].type) {\n          that.vis.currentSorting.local[index].el = control.select('.sort-' + that.vis.currentSorting.local[index].type);\n        }\n      });\n    }\n\n    babelHelpers.createClass(Topbar, [{\n      key: 'toggleColumn',\n      value: function toggleColumn() {\n        console.log('Toggle column');\n      }\n    }, {\n      key: 'selectNodesColumn',\n      value: function selectNodesColumn(el) {\n        return this.vis.selectByColumn(d3.select(el).datum().level, '.node');\n      }\n    }, {\n      key: 'highlightLabels',\n      value: function highlightLabels(deHighlight) {\n        this.vis.baseElD3.selectAll('.node').classed('highlight-label', !deHighlight);\n      }\n    }, {\n      key: 'highlightBars',\n      value: function highlightBars(el, type, deHighlight) {\n        var nodes = el ? this.selectNodesColumn(el) : this.vis.baseElD3.selectAll('.node');\n\n        nodes.classed('highlight-bar', !deHighlight).selectAll('.bar.' + type).classed('highlight', !deHighlight);\n      }\n    }, {\n      key: 'sortAllColumns',\n      value: function sortAllColumns(el, type) {\n        var newSortType = false;\n\n        if (this.vis.currentSorting.global.type !== type) {\n          newSortType = true;\n\n          // Unset class of previous global sorting element\n          if (this.vis.currentSorting.global.el) {\n            this.resetSortEl(this.vis.currentSorting.global.el);\n          }\n        }\n\n        this.vis.currentSorting.global.el = d3.select(el);\n        this.vis.currentSorting.global.el.classed('active', true);\n        this.vis.currentSorting.global.type = type;\n\n        var columnKeys = Object.keys(this.vis.currentSorting.local);\n        for (var i = 0, len = columnKeys.length; i < len; i++) {\n          this.sortColumn(el, columnKeys[i], type, true);\n        }\n      }\n    }, {\n      key: 'sortColumn',\n      value: function sortColumn(el, index, type, global) {\n        // Reset global sorting\n        if (!global) {\n          this.vis.currentSorting.global.type = undefined;\n          this.resetSortEl(this.vis.currentSorting.global.el);\n        }\n\n        var newSortType = false;\n\n        if (this.vis.currentSorting.local[index].el) {\n          if (this.vis.currentSorting.local[index].type !== type) {\n            this.resetSortEl(this.vis.currentSorting.local[index].el);\n          }\n        }\n\n        if (this.vis.currentSorting.local[index].type !== type) {\n          newSortType = true;\n          // Reset sort order\n          this.vis.currentSorting.local[index].order = 0;\n        }\n\n        this.vis.currentSorting.local[index].el = d3.select(el);\n        this.vis.currentSorting.local[index].type = type;\n\n        // -1 = desc, 1 = asc\n        if (this.vis.currentSorting.local[index].order === -1) {\n          this.vis.currentSorting.local[index].order = 1;\n          this.vis.currentSorting.local[index].el.select('.icon-sort-desc').classed('visible', false);\n          this.vis.currentSorting.local[index].el.select('.icon-sort-asc').classed('visible', true);\n        } else {\n          this.vis.currentSorting.local[index].order = -1;\n          this.vis.currentSorting.local[index].el.select('.icon-sort-asc').classed('visible', false);\n          this.vis.currentSorting.local[index].el.select('.icon-sort-desc').classed('visible', true);\n        }\n\n        this.vis.currentSorting.local[index].el.select('.icon-unsort').classed('visible', false);\n\n        this.vis.sortColumn(index, type, this.vis.currentSorting.local[index].order, newSortType);\n      }\n    }, {\n      key: 'resetSortEl',\n      value: function resetSortEl(el) {\n        el.classed('active', false);\n        el.select('.icon-sort-desc').classed('visible', false);\n        el.select('.icon-sort-asc').classed('visible', false);\n        el.select('.icon-unsort').classed('visible', true);\n      }\n    }, {\n      key: 'toggleOptions',\n      value: function toggleOptions() {\n        console.log('Toggle options');\n      }\n    }, {\n      key: 'switch',\n      value: function _switch() {\n        this.el.classed('details', !this.el.classed('details'));\n      }\n    }, {\n      key: 'switchBarMode',\n      value: function switchBarMode(el, mode) {\n        if (this.vis.nodes.barMode !== mode) {\n          if (mode === 'one') {\n            this.globalOneBar.classed('active', true);\n            this.globalTwoBars.classed('active', false);\n          } else {\n            this.globalOneBar.classed('active', false);\n            this.globalTwoBars.classed('active', true);\n          }\n          this.vis.switchBarMode(mode);\n        }\n      }\n    }]);\n    return Topbar;\n  })();\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global && global.Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = objectTypes[typeof self] && self && self.Object && self;\n\n  /** Detect free variable `window`. */\n  var freeWindow = objectTypes[typeof window] && window && window.Object && window;\n\n  /**\n   * Used as a reference to the global object.\n   *\n   * The `this` value is used if it's the global object to avoid Greasemonkey's\n   * restricted `window` object, otherwise the `window` object is used.\n   */\n  var root = freeGlobal || ((freeWindow !== (this && this.window)) && freeWindow) || freeSelf || this;\n\n  /* Native method references for those with the same name as other `lodash` methods. */\n  var nativeIsFinite = root.isFinite;\n\n  /**\n   * Checks if `value` is a finite primitive number.\n   *\n   * **Note:** This method is based on [`Number.isFinite`](http://ecma-international.org/ecma-262/6.0/#sec-number.isfinite).\n   *\n   * @static\n   * @memberOf _\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n   * @example\n   *\n   * _.isFinite(10);\n   * // => true\n   *\n   * _.isFinite('10');\n   * // => false\n   *\n   * _.isFinite(true);\n   * // => false\n   *\n   * _.isFinite(Object(10));\n   * // => false\n   *\n   * _.isFinite(Infinity);\n   * // => false\n   */\n  function isFinite(value) {\n    return typeof value == 'number' && nativeIsFinite(value);\n  }\n\n  /**\n   * Creates and adds an interpolated exponential SVG gradient to an SVG element.\n   *\n   * @example\n   * ```\n   * exponentialGradient(\n   *   d3.select('svg'),\n   *   {\n   *     color: #fff,\n   *     offset: 10,\n   *     opacity: 0.5,\n   *     x: 0,\n   *     y: 0\n   *   },\n   *   {\n   *     color: #000,\n   *     offset: 10,\n   *     opacity: 1,\n   *     x: 1,\n   *     y: 1\n   *   },\n   *   'myFancyGradient',\n   *   3,\n   *   5\n   * );\n   * ```\n   *\n   * @method  exponentialGradient\n   * @author  Fritz Lekschas\n   * @date    2015-12-30\n   * @param   {Object}  el     Element to which the `def` gradient should be\n   *   added to.\n   * @param   {Object}  start  Start properies.\n   * @param   {Object}  end    End properies.\n   * @param   {String}  name   Name of the gradient.\n   * @param   {Number}  power  Exponential power.\n   * @param   {Number}  steps  Interpolation steps.\n   */\n  function exponentialGradient(el, start, end, name, power, steps) {\n    var scale = d3.scale.pow().exponent(power || 2);\n    var stepSize = 1 / ((steps || 0) + 1);\n\n    var gradient = el.append('defs').append('linearGradient').attr('id', name).attr('x1', start.x).attr('y1', start.y).attr('x2', end.x).attr('y2', end.y).attr('spreadMethod', 'pad');\n\n    gradient.append('stop').attr('offset', start.offset + '%').attr('stop-color', start.color).attr('stop-opacity', start.opacity);\n\n    for (var i = 0; i < steps; i++) {\n      gradient.append('stop').attr('offset', start.offset + i * stepSize * (end.offset - start.offset) + '%').attr('stop-color', end.color).attr('stop-opacity', start.opacity + scale(i * stepSize) * (end.opacity - start.opacity));\n    }\n\n    gradient.append('stop').attr('offset', end.offset + '%').attr('stop-color', end.color).attr('stop-opacity', end.opacity);\n  }\n\n  /**\n   * Checks if `value` is object-like.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   */\n  function isObjectLike(value) {\n    return !!value && typeof value == 'object';\n  }\n\n  /** Used to detect host constructors (Safari > 5). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used for native method references. */\n  var objectProto$2 = Object.prototype;\n\n  /** Used to resolve the decompiled source of functions. */\n  var fnToString = Function.prototype.toString;\n\n  /** Used to check objects for own properties. */\n  var hasOwnProperty = objectProto$2.hasOwnProperty;\n\n  /** Used to detect if a method is native. */\n  var reIsNative = RegExp('^' +\n    fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&')\n    .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n  );\n\n  /**\n   * Checks if `value` is a native function.\n   *\n   * @static\n   * @memberOf _\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n   * @example\n   *\n   * _.isNative(Array.prototype.push);\n   * // => true\n   *\n   * _.isNative(_);\n   * // => false\n   */\n  function isNative(value) {\n    if (value == null) {\n      return false;\n    }\n    if (isFunction(value)) {\n      return reIsNative.test(fnToString.call(value));\n    }\n    return isObjectLike(value) && reIsHostCtor.test(value);\n  }\n\n  /**\n   * Gets the native function at `key` of `object`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {string} key The key of the method to get.\n   * @returns {*} Returns the function if it's native, else `undefined`.\n   */\n  function getNative(object, key) {\n    var value = object == null ? undefined : object[key];\n    return isNative(value) ? value : undefined;\n  }\n\n  /**\n   * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n   * of an array-like value.\n   */\n  var MAX_SAFE_INTEGER = 9007199254740991;\n\n  /**\n   * Checks if `value` is a valid array-like length.\n   *\n   * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n   */\n  function isLength(value) {\n    return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n  }\n\n  /** `Object#toString` result references. */\n  var arrayTag = '[object Array]';\n\n  /** Used for native method references. */\n  var objectProto$1 = Object.prototype;\n\n  /**\n   * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n   * of values.\n   */\n  var objToString$1 = objectProto$1.toString;\n\n  /* Native method references for those with the same name as other `lodash` methods. */\n  var nativeIsArray = getNative(Array, 'isArray');\n\n  /**\n   * Checks if `value` is classified as an `Array` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n   * @example\n   *\n   * _.isArray([1, 2, 3]);\n   * // => true\n   *\n   * _.isArray(function() { return arguments; }());\n   * // => false\n   */\n  var isArray = nativeIsArray || function(value) {\n    return isObjectLike(value) && isLength(value.length) && objToString$1.call(value) == arrayTag;\n  };\n\n  var ExtendableError = (function (_Error) {\n    babelHelpers.inherits(ExtendableError, _Error);\n\n    function ExtendableError(message) {\n      babelHelpers.classCallCheck(this, ExtendableError);\n\n      var _this = babelHelpers.possibleConstructorReturn(this, Object.getPrototypeOf(ExtendableError).call(this, message));\n\n      _this.name = _this.constructor.name;\n      _this.message = message;\n      Error.captureStackTrace(_this, _this.constructor.name);\n      return _this;\n    }\n\n    return ExtendableError;\n  })(Error);\n\n  var LayoutNotAvailable = (function (_ExtendableError) {\n    babelHelpers.inherits(LayoutNotAvailable, _ExtendableError);\n\n    function LayoutNotAvailable(message) {\n      babelHelpers.classCallCheck(this, LayoutNotAvailable);\n      return babelHelpers.possibleConstructorReturn(this, Object.getPrototypeOf(LayoutNotAvailable).call(this, message || 'D3.layout.listGraph.js has not been loaded yet.'));\n    }\n\n    return LayoutNotAvailable;\n  })(ExtendableError);\n\n  var EventDispatcherNoFunction = (function (_ExtendableError2) {\n    babelHelpers.inherits(EventDispatcherNoFunction, _ExtendableError2);\n\n    function EventDispatcherNoFunction(message) {\n      babelHelpers.classCallCheck(this, EventDispatcherNoFunction);\n      return babelHelpers.possibleConstructorReturn(this, Object.getPrototypeOf(EventDispatcherNoFunction).call(this, message || 'Dispatcher needs to be a function.'));\n    }\n\n    return EventDispatcherNoFunction;\n  })(ExtendableError);\n\n  var Events = (function () {\n    function Events(el, broadcast) {\n      babelHelpers.classCallCheck(this, Events);\n\n      if (broadcast && !isFunction(broadcast)) {\n        throw new EventDispatcherNoFunction();\n      }\n\n      this.el = el;\n      this._stack = {};\n      this.dispatch = broadcast ? broadcast : this._dispatchEvent;\n    }\n\n    babelHelpers.createClass(Events, [{\n      key: '_dispatchEvent',\n      value: function _dispatchEvent(eventName, data) {\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent(eventName, false, false, data);\n        this.el.dispatchEvent(event);\n      }\n    }, {\n      key: 'broadcast',\n      value: function broadcast(event, data) {\n        this.dispatch(event, data);\n      }\n\n      /**\n       * Add a callback function to an event stack.\n       *\n       * @method  on\n       * @author  Fritz Lekschas\n       * @date    2016-01-07\n       *\n       * @param   {String}    event     Event identifier.\n       * @param   {Function}  callback  Function which is called when the event\n       *   stack is triggered.\n       * @param   {Number}    times     Number of times the callback function should\n       *   be triggered before it is removed from the event stack. This is useful\n       *   when an event happens only a certain number of times.\n       * @return  {Number}              Index of callback, which is needed to\n       *   manually remove the callback from the event stack.\n       */\n\n    }, {\n      key: 'on',\n      value: function on(event, callback, times) {\n        if (!isFunction(callback)) {\n          return false;\n        }\n\n        if (isFinite(times)) {\n          times = parseInt(times);\n        } else {\n          times = Infinity;\n        }\n\n        if (isArray(this.stack[event])) {\n          return this.stack[event].push({ callback: callback, times: times }) - 1;\n        } else {\n          this.stack[event] = [{ callback: callback, times: times }];\n          return 0;\n        }\n      }\n    }, {\n      key: 'off',\n\n      /**\n       * Removes a callback function from an event stack given its index.\n       *\n       * @method  off\n       * @author  Fritz Lekschas\n       * @date    2016-01-07\n       *\n       * @param   {String}   event  Event identifier.\n       * @param   {Number}   index  Index of the callback to be removed.\n       * @return  {Boolean}         Returns `true` if event callback was found and\n       *   successfully removed.\n       */\n      value: function off(event, index) {\n        try {\n          this.stack[event].splice(index, 1);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      }\n    }, {\n      key: 'trigger',\n\n      /**\n       * Trigger an event stack\n       *\n       * @method  trigger\n       * @author  Fritz Lekschas\n       * @date    2016-01-07\n       *\n       * @param   {String}   event  Event identifier.\n       * @return  {Boolean}         Returns `true` if an event stack was found.\n       */\n      value: function trigger(event, data) {\n        if (isArray(this.stack[event])) {\n          // Traversing from the end to the start, which has the advantage that\n          // deletion of events, i.e. calling `Event.off()` doesn't affect the index\n          // of event listeners in the next step.\n          for (var i = this.stack[event].length; i--;) {\n            // Instead of checking whether `stack[event][i]` is a function here,\n            // we do it just once when we add the function to the stack.\n            if (this.stack[event][i].times--) {\n              this.stack[event][i].callback(data);\n            } else {\n              this.off(event, i);\n            }\n          }\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }, {\n      key: 'stack',\n      get: function get() {\n        return this._stack;\n      }\n    }]);\n    return Events;\n  })();\n\n  var ListGraph = (function () {\n    function ListGraph(baseEl, data, rootNodes, options) {\n      var _this = this;\n\n      babelHelpers.classCallCheck(this, ListGraph);\n\n      if (!d3.layout.listGraph) {\n        throw new LayoutNotAvailable();\n      }\n\n      if (!isObject(options)) {\n        options = {};\n      }\n\n      var that = this;\n\n      this.baseEl = baseEl;\n      this.baseElD3 = d3.select(baseEl);\n      this.baseElJq = $(baseEl);\n      this.svgD3 = this.baseElD3.select('svg.base');\n\n      if (this.svgD3.empty()) {\n        this.svgD3 = this.baseElD3.append('svg').attr('class', 'base');\n        this.svgJq = $(this.svgD3[0]);\n      } else {\n        this.svgJq = $(this.svgD3[0]);\n      }\n\n      this.rootNodes = rootNodes;\n\n      this.width = options.width || this.svgJq.width();\n      this.height = options.height || this.svgJq.height();\n      this.scrollbarWidth = options.scrollbarWidth || SCROLLBAR_WIDTH;\n      this.columns = options.columns || COLUMNS;\n      this.rows = options.rows || ROWS;\n      this.iconPath = options.iconPath || ICON_PATH;\n\n      this.sortBy = options.sortBy;\n      this.sortOrder = options.sortOrder || DEFAULT_SORT_ORDER;\n\n      this.events = new Events(this.baseEl, options.dispatcher);\n\n      this.baseElJq.width(this.width).addClass(CLASSNAME);\n\n      this.layout = new d3.layout.listGraph([this.width, this.height], [this.columns, this.rows]);\n\n      this.data = data;\n      this.visData = this.layout.process(this.data, this.rootNodes, {\n        sortBy: this.sortBy,\n        sortOrder: this.sortOrder\n      });\n\n      /**\n       * Stores current sorting, e.g. type, order and a reference to the element.\n       *\n       * @type  {Object}\n       */\n      this.currentSorting = {\n        global: {\n          type: this.sortBy,\n          order: this.sortOrder\n        },\n        local: {}\n      };\n\n      exponentialGradient(this.svgD3, {\n        color: COLOR_NEGATIVE_RED,\n        offset: 0,\n        opacity: 0.2,\n        x: 0,\n        y: 0\n      }, {\n        afterOffsetOpacity: 1,\n        color: COLOR_NEGATIVE_RED,\n        offset: 99,\n        opacity: 1,\n        x: 1,\n        y: 0\n      }, 'negativeRed', 4, 10);\n\n      exponentialGradient(this.svgD3, {\n        beforeOffsetOpacity: 1,\n        color: COLOR_POSITIVE_GREEN,\n        offset: 1,\n        opacity: 1,\n        x: 0,\n        y: 0\n      }, {\n        color: COLOR_POSITIVE_GREEN,\n        offset: 100,\n        opacity: 0.2,\n        x: 1,\n        y: 0\n      }, 'positiveGreen', 0.25, 10);\n\n      this.barMode = options.barMode || DEFAULT_BAR_MODE;\n      this.svgD3.classed(this.barMode + '-bar', true);\n\n      this.topbar = new Topbar(this, this.baseElD3, this.visData);\n\n      this.svgD3.attr('viewBox', '0 0 ' + this.width + ' ' + this.height);\n\n      this.container = this.svgD3.append('g');\n\n      this.columns = new Columns(this.container, this.visData);\n\n      this.links = new Links(this.columns.groups, this.visData, this.layout);\n      this.nodes = new Nodes(this, this.columns.groups, this.visData, this.links, this.events);\n      this.columns.scrollPreparation(this, this.scrollbarWidth);\n      this.scrollbars = new Scrollbars(this.columns.groups, this.visData, this.scrollbarWidth);\n\n      // jQuery's mousewheel plugin is much nicer than D3's half-baked zoom event.\n      this.$levels = $(this.columns.groups[0]).on('mousewheel', function (event) {\n        that.mousewheelColumn(this, event);\n      });\n\n      // Normally we would reference a named methods but since we need to aceess\n      // the class' `this` property instead of the DOM element we need to use an\n      // arrow function.\n      this.scrollbars.selection.on('mousedown', function () {\n        that.scrollbarMouseDown(this, d3.event);\n      });\n\n      // We need to listen to `mouseup` and `mousemove` globally otherwise\n      // scrolling will only work as long as the cursor hovers the actual\n      // scrollbar, which is super annoying.\n      d3.select(document).on('mouseup', function () {\n        _this.globalMouseUp(d3.event);\n      }).on('mousemove', function () {\n        _this.globalMouseMove(d3.event);\n      });\n    }\n\n    babelHelpers.createClass(ListGraph, [{\n      key: 'globalMouseUp',\n      value: function globalMouseUp(event) {\n        if (this.activeScrollbar) {\n          var data = this.activeScrollbar.datum();\n          var deltaY = data.scrollbar.clientY - event.clientY;\n\n          // Save final vertical position\n          // Scrollbar\n          data.scrollbar.scrollTop = Math.min(Math.max(data.scrollbar.scrollTop - deltaY, 0), data.scrollbar.scrollHeight);\n\n          // Content\n          data.scrollTop = Math.max(Math.min(data.scrollTop + data.invertedHeightScale(deltaY), 0), -data.scrollHeight);\n\n          this.activeScrollbar.classed('active', false);\n\n          this.activeScrollbar = undefined;\n        }\n      }\n    }, {\n      key: 'globalMouseMove',\n      value: function globalMouseMove(event) {\n        if (this.activeScrollbar) {\n          var data = this.activeScrollbar.datum();\n          var deltaY = data.scrollbar.clientY - event.clientY;\n\n          // Scroll scrollbar\n          ListGraph.scrollY(this.activeScrollbar.node(), Math.min(Math.max(data.scrollbar.scrollTop - deltaY, 0), data.scrollbar.scrollHeight));\n\n          // Scroll content\n          var contentScrollTop = Math.max(Math.min(data.scrollTop + data.invertedHeightScale(deltaY), 0), -data.scrollHeight);\n\n          ListGraph.scrollY(data.nodes, contentScrollTop);\n\n          // Scroll Links\n          this.links.scroll(data.linkSelections.outgoing, this.layout.offsetLinks(data.level, contentScrollTop, 'source'));\n\n          this.links.scroll(data.linkSelections.incoming, this.layout.offsetLinks(data.level - 1, contentScrollTop, 'target'));\n        }\n      }\n    }, {\n      key: 'scrollbarMouseDown',\n      value: function scrollbarMouseDown(el, event) {\n        this.activeScrollbar = d3.select(el).classed('active', true);\n        this.activeScrollbar.datum().scrollbar.clientY = event.clientY;\n      }\n    }, {\n      key: 'mousewheelColumn',\n      value: function mousewheelColumn(el, event) {\n        event.preventDefault();\n\n        var data = d3.select(el).datum();\n\n        if (data.scrollHeight > 0) {\n          // Scroll nodes\n          data.scrollTop = Math.max(Math.min(data.scrollTop + event.deltaY, 0), -data.scrollHeight);\n\n          ListGraph.scrollY(data.nodes, data.scrollTop);\n\n          // Scroll scrollbar\n          data.scrollbar.scrollTop = data.scrollbar.heightScale(-data.scrollTop);\n\n          ListGraph.scrollY(data.scrollbar.el, data.scrollbar.scrollTop);\n\n          // Scroll Links\n          this.links.scroll(data.linkSelections.outgoing, this.layout.offsetLinks(data.level, data.scrollTop, 'source'));\n\n          this.links.scroll(data.linkSelections.incoming, this.layout.offsetLinks(data.level - 1, data.scrollTop, 'target'));\n        }\n      }\n    }, {\n      key: 'selectByColumn',\n      value: function selectByColumn(index, selector) {\n        return d3.select(this.columns.groups[0][index]).selectAll(selector);\n      }\n    }, {\n      key: 'sortColumn',\n      value: function sortColumn(level, property, sortOrder, newSortType) {\n        this.nodes.sort(this.layout.sort(level, property, sortOrder).nodes(level), newSortType);\n        this.links.sort(this.layout.links(level - 1, level + 1));\n      }\n    }, {\n      key: 'switchBarMode',\n      value: function switchBarMode(mode) {\n        this.svgD3.classed('one-bar', mode === 'one');\n        this.svgD3.classed('two-bar', mode === 'two');\n        this.nodes.bars.switchMode(mode, this.currentSorting);\n      }\n    }, {\n      key: 'trigger',\n      value: function trigger(event, data) {\n        this.events.trigger(event, data);\n      }\n    }, {\n      key: 'barMode',\n      get: function get() {\n        if (this.bars) {\n          return this.nodes.bars.mode;\n        }\n        return this._barMode;\n      },\n      set: function set(mode) {\n        if (this.bars) {\n          this.nodes.bars.mode = mode;\n        }\n        this._barMode = mode;\n      }\n    }], [{\n      key: 'scrollY',\n      value: function scrollY(el, offset) {\n        d3.select(el).attr('transform', 'translate(0, ' + offset + ')');\n      }\n    }]);\n    return ListGraph;\n  })();\n\n  return ListGraph;\n\n})($,d3);"],"sourceRoot":"/source/"}