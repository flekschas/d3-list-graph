<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="../dist/listGraph.css">
  <link rel="stylesheet" type="text/css" href="styles.css">

  <title>List Graph Prototype</title>
</head>
<body>
  <div id="example" class="list-graph">
    <div class="top-bar"></div>
    <div class="wrapper"><svg class="base"></svg></div>
  </div>
  <script src="../bower_components/jquery/dist/jquery.js"></script>
  <script src="../bower_components/jquery-mousewheel/jquery.mousewheel.js"></script>
  <script src="../bower_components/d3/d3.js"></script>
  <script src="../dist/d3.layout.listGraph.js"></script>
  <script src="../dist/listGraph.js"></script>
  <script>
    'use strict';

    var customDispatcher = function (event, data) {
      console.log('Custom dispatcher: has ' + event, data);
    };

    d3.json('data.json', function (error, data) {
      if (error) throw error;

      var graph = new ListGraph(
          document.querySelector('#example'),
          data,
          [1, 2],
          {
            forceWidth: true,
            iconPath: '/dist/icons.svg',
            rows: 8,
            sortBy: 'precision',
            dispatcher: customDispatcher,
            lessAnimations: false
          }
        );

      setTimeout(function () {
        graph.trigger('d3ListGraphFocusNodes', {
          nodeIds: ['2-1-1-1', '2-1-4', '1-2'],
          zoomOut: true
        });
      }, 1000);

      setTimeout(function () {
        graph.trigger('d3ListGraphFocusNodes', {
          nodeIds: ['2-1-1-1', '2-1-4', '2-3-1'],
          zoomOut: true
        });
      }, 2000);

      setTimeout(function () {
        graph.trigger('d3ListGraphBlurNodes', {
          nodeIds: ['2-1-1-1', '2-1-4', '1-2', '2-3-1'],
          zoomIn: true
        });
      }, 4000);

      setTimeout(function () {
        graph.trigger('d3ListGraphNodeLock', ['2-1']);
      }, 5000);

      setTimeout(function () {
        graph.trigger('d3ListGraphNodeUnlock', ['2-1']);
      }, 6000);

      setTimeout(function () {
        graph.trigger('d3ListGraphNodeRoot', ['1-2']);
      }, 7000);

      setTimeout(function () {
        graph.trigger('d3ListGraphNodeUnroot', ['1-2']);
      }, 8000);
    });

    $('#example').on('d3ListGraphNodeClick', function (e) {
      console.log('I clicked on ' + e.originalEvent.detail.id);
    });
  </script>
</body>
</html>
